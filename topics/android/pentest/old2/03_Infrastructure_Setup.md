# Infrastructure Setup

## Hardware Requirements

### Device Farm Specification
To ensure consistent and repeatable results, the framework is optimized for specific hardware configurations.

*   **Primary Device**: Google Pixel Series (Pixel 4 through Pixel 7).
    *   *Reasoning*: Excellent AOSP support, unlockable bootloaders, and compatibility with custom kernels.
*   **Battery-less Modification**:
    *   For 24/7 server-rack operation, physical batteries are removed and replaced with direct USB power delivery (Buck Converters) to prevent battery swelling and thermal throttling.
*   **Network Isolation**:
    *   Devices utilize **Reverse Tethering** over USB. Wi-Fi radios are disabled to prevent air-interface congestion and ensure all traffic is routed through the host machine's proxy.

## Software Environment

### Host Machine
*   **OS**: Ubuntu 22.04 LTS or higher (Dockerized environment recommended).
*   **Core Tools**: `adb`, `python3`, `frida-tools`, `mitmproxy`.

### Device Configuration (Custom ROM)
Stock Android is insufficient for deep analysis. A custom AOSP build is deployed:

*   **System-Level Root**: Root access is baked into the `su` binary in the system partition, bypassing standard root detection methods that look for `Magisk` or `SuperSU` APKs.
*   **Certificate Injection**: The CA certificate for the intercepting proxy is pre-installed in the system trust store (`/system/etc/security/cacerts/`), negating the need for user prompts or network security configuration bypasses in some cases.
*   **Hidden Instrumentation**: The ROM kernel is patched to hide `ptrace` flags and other debug artifacts from anti-tamper mechanisms.

## Toolchain & Dependencies

| Tool Category | Recommended Tool | Purpose |
| Data                  | Value                    | Description                                     |
| --------------------- | ------------------------ | ----------------------------------------------- |
| **Static Analysis**   | **Jadx** / **APKTool**   | Decompilation and resource extraction.          |
| **Dynamic Hooking**   | **Frida**                | Runtime instrumentation and logic modification. |
| **Network Proxy**     | **Mitmproxy**            | Scriptable HTTP/S interception and fuzzing.     |
| **Device Management** | **OpenSTF** / **Scrcpy** | Remote control and screen mirroring.            |

## Legal & Operational Prerequisites

Before any testing begins, the following must be secured:
1.  **Authorization**: A signed Letter of Authorization (LoA) defining the scope (App package name, API endpoints) and time windows.
2.  **Environment Snapshot**: A clean state backup of the device `data` partition (using OverlayFS) to allow for instant rollback after each test session.
