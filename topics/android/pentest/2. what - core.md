收到。這是一個非常關鍵的轉換：從「自我檢查」轉向「對外部廠商的要求」。

當您付費聘請專業資安廠商進行 Android App 滲透測試時，您購買的不應該只是一份自動掃描報告，而是一場**依照國際標準（如 OWASP MASTG）執行的嚴格驗收程序**。

這份清單將協助您作為甲方針對乙方（廠商）開出規格，或在驗收時逐項核對。這就是「專業廠商」必須交付的工作範疇。

---

### ⚠️ 前置防護：驗收標準定錨 (Pre-Flight Check)

在檢視廠商工作項目之前，請先確認合約中是否引用了標準框架。目前業界公認的唯一真理是 **OWASP Mobile Application Security Testing Guide (MASTG)**。

若廠商只提供 Nessus 或 automated scanner 的報表，那不叫滲透測試，那叫「弱點掃描」。專業的滲透測試必須包含 **「人工驗證 (Manual Verification)」** 與 **「邏輯漏洞挖掘 (Business Logic Testing)」**。

---

### 第一階段：四大核心檢測維度 (The 4 Core Testing Dimensions)

廠商必須針對以下四個維度，執行地毯式的「原子級」檢測：

#### 1. 端點組件安全 (Client-Side Component Security)
檢查 App 是否錯誤地將內部功能暴露給外部，導致惡意程式可以搭便車。

* **🔍 深度拆解 (Exported Components Analysis)：**
    * **定義：** 檢查 Android 的四大組件（Activity, Service, Broadcast Receiver, Content Provider）在 `AndroidManifest.xml` 中是否被設定為 `exported=true`。
    * **情境：** App 內部有一個「重設密碼」的頁面，原本應該只有登入後才能跳轉過去。但如果這個頁面（Activity）被錯誤地「導出（Exported）」，其他惡意 App 就可以直接呼叫這個頁面，繞過所有驗證流程。
    * **實例：** 廠商應嘗試撰寫一個攻擊腳本，直接呼叫您 App 的 `PaymentActivity`，看是否能繞過購物車流程直接進入付款畫面，或者是否能透過惡意廣播（Intent）竊取 Intent 內攜帶的敏感參數。

#### 2. 本地資料儲存檢驗 (Local Data Storage)
檢查當手機落入他人手中，或手機中毒時，資料是否安全。

* **🔍 深度拆解 (Forensic Data Analysis)：**
    * **定義：** 廠商需在一台已 Root 的手機上安裝您的 App，並全面搜索 `/data/data/<package_name>/` 目錄下的所有檔案。
    * **情境：** 開發者常以為將資料存在「私有目錄」就安全了，但在 Root 環境下這些都是透明的。廠商必須檢查 SharedPreferences、SQLite 資料庫、暫存檔（Cache）甚至是 SD 卡上的下載目錄。
    * **實例：**
        * **檢查加密：** 廠商打開 `user.db`，確認密碼欄位是雜湊（Hash）過的，還是明文？如果是加密的，他們還需嘗試在代碼中尋找是否將「金鑰（Key）」硬編碼在 App 裡（這就等於把鑰匙鎖在保險箱門上）。
        * **檢查截圖與快取：** Android 系統切換視窗時會自動截圖，廠商需檢查這些自動截圖是否包含了信用卡號或密碼等敏感畫面（App 應設定 `FLAG_SECURE` 來防止此事）。

#### 3. 傳輸層安全與後端 API 測試 (Network & Server-Side)
App 只是殼，真正的資料都在伺服器。這裡通常是漏洞最多的地方。

* **🔍 深度拆解 (Traffic Interception & API Testing)：**
    * **定義：** 廠商必須繞過 SSL Pinning（憑證綁定），成功攔截 App 與伺服器之間的所有流量（HTTPS），並針對後端 API 進行傳統的 Web 滲透測試（OWASP Top 10）。
    * **情境：** 很多人誤以為 App 測試只測手機端。事實上，廠商必須修改封包參數，測試後端 API 是否有 SQL Injection、權限越權（IDOR）等問題。
    * **實例：**
        * **水平越權：** 廠商攔截「查詢訂單」的請求，將 `order_id=1001` 改為 `order_id=1002`。如果後端沒有檢查這個訂單是否屬於當前用戶就回傳資料，這就是嚴重漏洞。
        * **輸入驗證：** 在登入框輸入特殊字元或超長字串，測試 App 會不會崩潰（Denial of Service）或後端會不會報錯洩漏資料庫結構。

#### 4. 逆向工程防禦與代碼混淆 (Resiliency against Reverse Engineering)
測試 App 是否容易被破解、修改或製作成「盜版/外掛」。

* **🔍 深度拆解 (Anti-Tampering Verification)：**
    * **定義：** 廠商應嘗試反編譯 App，看代碼是否經過混淆（Obfuscation），並嘗試修改代碼後重新打包（Repackaging），看 App 是否能偵測到自己被竄改。
    * **情境：** 這是遊戲類或金融類 App 最在意的。如果駭客能輕易修改 App 邏輯並重新發布一個「去廣告版」或「無限金幣版」，這對商業模式是毀滅性打擊。
    * **實例：**
        * **Root 檢測繞過：** 廠商會使用 Frida 等工具，嘗試繞過 App 的 Root 檢測機制。如果廠商能輕易繞過，代表您的防護機制形同虛設。
        * **核心邏輯暴露：** 檢查混淆程度。如果核心的加密演算法類別名稱還是 `AESEncryptor`，變數名稱還是 `secretKey`，那混淆就做得不夠徹底。

---

### 第二階段：關鍵加值測試項目 (The Value-Add Items)

除了上述基礎，專業廠商還**必須**做以下兩件事，這才是體現專業價值的地方：

#### 1. 業務邏輯漏洞測試 (Business Logic Vulnerabilities)
這無法用工具掃描，完全依賴測試人員的腦力與經驗。

* **🔍 深度拆解：**
    * **定義：** 測試符合程式邏輯但違背業務規則的行為。
    * **實例：**
        * **價格邏輯：** 嘗試購買 `-1` 個商品，看總金額是否會變負數（導致退款變儲值）。
        * **競爭條件 (Race Condition)：** 同一時間發送兩個「使用優惠券」的請求，看是否能一張券用兩次。
        * **驗證碼爆破：** 測試簡訊驗證碼是否有輸入次數限制，若無，廠商應演示如何暴力破解驗證碼。

#### 2. 第三方 SDK 檢測 (Supply Chain Risks)
* **🔍 深度拆解：**
    * **定義：** 檢查 App 引入的廣告 SDK、分析 SDK 或支付 SDK 是否存在已知漏洞。
    * **情境：** 您的代碼寫得很完美，但您用的「某某廣告套件」有一個後門，駭客一樣可以控制您的 App。
    * **實例：** 廠商應指認出使用了哪些過期或有高風險 CVE 漏洞的第三方函式庫，並建議更新。

---

### 第三階段：交付物標準 (Deliverables)

當廠商交報告給您時，請檢查是否包含以下內容，缺一不可：

1.  **漏洞重現步驟 (Steps to Reproduce)：** 不能只說「有漏洞」，必須附上截圖、影片或具體的封包數據（HTTP Request/Response），證明他們真的做到了（Proof of Concept, PoC）。
2.  **風險評級 (Risk Rating)：** 必須依據 CVSS (Common Vulnerability Scoring System) 標準打分，而不是憑感覺喊「高風險」。
3.  **具體修復建議 (Remediation)：** 不能只寫「請修復」。必須針對您的程式語言（Java/Kotlin）給出具體的代碼範例或設定檔修改建議（例如：請在 `AndroidManifest.xml` 中將 `android:allowBackup` 設為 `false`）。

---

### 🍎 全息師結語 (The Concept Rebuilder's Summary)

專業廠商的 Android 滲透測試，是一場**「有組織的入侵模擬」**。

他們要做的只有三件事，但每件事都深不見底：
1.  **進得去：** 突破網路防禦、繞過登入驗證。
2.  **拿得到：** 竊取本地檔案、攔截後端資料。
3.  **搞得壞：** 竄改業務邏輯、破解 App 結構。

**您的驗收底線是：** 不要接受任何「沒有附帶驗證過程（PoC）」的報告。如果他們無法展示如何利用這個漏洞，那這個漏洞就不具備真實的威脅價值。

### 🚀 下一步建議 (Next Step)

既然您關注廠商的執行深度，是否需要我為您生成一份 **「滲透測試廠商驗收檢核表 (RFP/SOW Checklist)」**？

這份表格可以用來放在您給廠商的 **需求建議書 (RFP)** 中，強制要求廠商承諾執行上述所有測試項目，避免他們偷工減料。